%p#notice= notice
%h3
  = link_to 'Update Grades', grading_sheet_course_path(@course)
  - unless @course.partner_sem.nil?
    |
    - if @course.sem == 1
      = link_to 'View 2nd sem', course_path(@course.partner_sem)
      |
      = link_to '>> Whole Year', "/grades/classlist/#{@course.id}"
    - else
      = link_to 'View 1st sem', course_path(@course.partner_sem)
      |
      = link_to '>> Whole Year', "/grades/classlist/#{@course.partner_sem.id}"
%br
%h4
  = @course.semname
  = @course.schoolyear.name
%h1= @course.subject.details
%h2= @course.faculty.fullname
%h3= @course.section.name
-unless(@course.students.empty?)
  %table
    %thead
      %tr
        %th Student No
        %th Student
        %th 1st Q
        %th 2nd Q
        %th Average
        %th Action
    %tbody
    - @course.enrollees.each do |e|
      %tr
        -if e.quartera.nil? || e.quarterb.nil?
          %td{:style => "color: red"}= e.student.student_no
        -elsif e.quartera < 50 || e.quarterb < 50
          %td{:style => "color: orange"}= e.student.student_no
        -else
          %td= e.student.student_no
        %td= e.student.fullname
        %td= e.quartera
        %td= e.quarterb
        %td
          - unless !e.quartera.nil? || !e.quarterb.nil?
            = link_to "unenroll" , "/courses/#{@course.id}/unenroll/#{e.student_id}"
        -if e.quartera.nil? || e.quarterb.nil?
          %td n/a
        - else
          %td= (e.quartera + e.quarterb) / 2

%h3 Enroll Students
= form_for(@course, :url => enroll_students_course_path) do |f|
  -if @course.errors.any?
    #error_explanation
      %h2= "#{pluralize(@course.errors.count, "error")} prohibited this section from being saved:"
      %ul
        - @course.errors.full_messages.each do |msg|
          %li= msg
  .field
    = select_tag "students[]", options_from_collection_for_select(@students, "id", "fullname"), :multiple => true, :class =>"multiselect" 
  .actions
    = f.submit 'Enroll'
